# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased]

### üîß Fixed

- **PHPStan errors**: Reemplazado `logger()?->` con `Log` facade para evitar errores de nullsafe
- **GitHub Actions**: Eliminado Laravel 9.x que causaba conflictos de dependencias
- **Code Quality**: Todos los archivos ahora pasan PHPStan nivel 8

### üóëÔ∏è Removed

- **Laravel 9.x support**: Laravel 9 removido por conflictos de dependencias (usar versi√≥n 1.x para Laravel 9)

---

## [2.0.0] - 2025-10-09

### ‚ú® Added

- **Laravel 12 support**: Agregado soporte completo para Laravel 12.x
- **Laravel 11 support**: Agregado soporte completo para Laravel 11.x
- **PHP 8.4 support**: Compatibilidad completa con PHP 8.4
- **Claude Code integration**:
  - Agentes especializados: `laravel-package-expert`, `php-testing-expert`, `api-integration-specialist`
  - Comandos slash personalizados: `/test`, `/fix`, `/release`, `/docs`, `/new-feature`
  - CLAUDE.md: Gu√≠a completa para asistentes IA
- **VSCode configuration**:
  - Configuraci√≥n compartida del workspace
  - Extensiones recomendadas para desarrollo PHP/Laravel
  - Tasks automatizadas para tests y an√°lisis
  - Snippets personalizados del proyecto
- **Compatibility matrix**: Tabla de compatibilidad detallada en documentaci√≥n

### üîÑ Changed

- **Minimum PHP version**: Actualizado de 8.0 a 8.1
- **Dropped Laravel 8.x support**: Laravel 8 ya no es soportado (EOL)
- **Updated dependencies**:
  - `illuminate/support`: ^9.0|^10.0|^11.0|^12.0 (anteriormente ^8.0|^9.0|^10.0)
  - `phpunit/phpunit`: ^10.0|^11.0 (anteriormente ^9.5|^10.0|^11.0)
  - `orchestra/testbench`: ^7.0|^8.0|^9.0|^10.0 (a√±adidos v9 y v10)
  - `mockery/mockery`: ^1.6 (actualizado desde ^1.4)
- **GitHub Actions matrix**: Actualizada para incluir Laravel 11 y 12 con todas las combinaciones de PHP

### üìö Documentation

- **README.md**: Actualizado con versiones PHP 8.1-8.4 y Laravel 9-12
- **CLAUDE.md**: Documentaci√≥n completa de agentes y comandos Claude Code
- **Compatibility matrix**: Tabla detallada de versiones soportadas
- **.vscode/README.md**: Documentaci√≥n de configuraci√≥n VSCode
- **.claude/README.md**: Documentaci√≥n de agentes y comandos

### üß™ Testing

- **CI/CD expansion**: Tests en 12 combinaciones de PHP/Laravel (anteriormente 9)
- **Laravel 11.x testing**: PHP 8.2, 8.3, 8.4 con Testbench ^9.0
- **Laravel 12.x testing**: PHP 8.2, 8.3, 8.4 con Testbench ^10.0

### üóëÔ∏è Removed

- **Laravel 8.x support**: Eliminado soporte para Laravel 8 (EOL)
- **PHP 8.0 support**: Eliminado soporte para PHP 8.0

---

## [1.1.1] - 2025-09-18

### üîß Fixed

- **Logger null-safe calls**: Agregado operador null-safe (?->) a llamadas logger() en SendBulkSmsJob y ConvoChatCache
- **PHPStan Level 8 compliance**: Eliminados todos los errores de an√°lisis est√°tico relacionados con logger()
- **GitHub Actions stability**: Estabilizada matriz de CI con combinaciones confiables de PHP/Laravel

### üîÑ Changed

- **Laravel 11 support**: Temporalmente removido soporte para Laravel 11 debido a incompatibilidades de dependencias
- **Supported Laravel versions**: Ahora soporta Laravel 8.x, 9.x, 10.x (matriz estable y probada)
- **CI/CD matrix**: Reducida a 9 combinaciones bien probadas para mayor confiabilidad

### üìö Documentation

- **README badges**: Agregados badges de versiones PHP y Laravel soportadas
- **Test status badge**: Agregado badge din√°mico del estado de GitHub Actions
- **Version accuracy**: Badges ahora reflejan las versiones realmente soportadas

### üõ°Ô∏è Quality Assurance

- **100% test success**: 41/41 tests pasando en todas las combinaciones soportadas
- **PHPStan Level 8**: An√°lisis est√°tico sin errores
- **Stable CI pipeline**: GitHub Actions ejecut√°ndose consistentemente sin fallos

---

## [1.1.0] - 2024-09-17

### ‚ú® Added

#### üîß An√°lisis de c√≥digo y calidad
- **PHPStan level 8**: An√°lisis est√°tico completo con cero errores
- **PHP CS Fixer**: Formateo autom√°tico de c√≥digo con est√°ndares PSR-12
- **GitHub Actions CI/CD**: Tests autom√°ticos en m√∫ltiples versiones PHP (8.0-8.4) y Laravel (8-11)
- **Codecov integration**: Reportes de cobertura de c√≥digo

#### ‚ö° Mejoras de rendimiento y arquitectura
- **Inyecci√≥n de dependencias mejorada**: HTTP client configurable y testeable
- **Constantes organizadas**: Eliminaci√≥n de strings m√°gicos en servicios
- **Validaci√≥n robusta de configuraci√≥n**: Validaci√≥n autom√°tica de API keys, URLs y timeouts
- **Logging estructurado**: Logs con contexto completo y API keys redactados
- **Cache layer**: Sistema de cach√© inteligente para respuestas de API
- **Queue integration**: Jobs para env√≠os masivos asincr√≥nicos
- **Rate limiting**: Protecci√≥n contra spam y abuso

#### üß™ Testing y debugging
- **41 tests completos**: Cobertura de funcionalidad, configuraci√≥n y errores
- **Tests de timeout**: Verificaci√≥n de configuraciones personalizadas de timeout
- **Tests de constantes**: Validaci√≥n de todos los valores constantes
- **Tests de configuraci√≥n**: Validaci√≥n de par√°metros requeridos

#### üìö Documentaci√≥n ampliada
- **README comprehensivo**: Ejemplos avanzados, troubleshooting y mejores pr√°cticas
- **Gu√≠as de seguridad**: Patrones de protecci√≥n de API keys y validaci√≥n
- **Ejemplos de performance**: Optimizaciones para env√≠os masivos
- **Gu√≠as de debugging**: Herramientas y t√©cnicas de diagn√≥stico

### üîÑ Changed

- **Arquitectura de servicios**: Constructores mejorados con inyecci√≥n de dependencias
- **Manejo de errores**: Sistema m√°s robusto con logging detallado
- **Tests**: Migraci√≥n a PHPUnit 12 con m√©todo names en lugar de @test annotations
- **Timeout configuration**: Ahora configurable por servicio y globalmente

### üêõ Fixed

- **Tests de error handling**: Correcci√≥n de tests que esperaban arrays en lugar de excepciones
- **Composer dependencies**: Actualizaci√≥n a versiones m√°s recientes y compatibles
- **PHPStan issues**: Resoluci√≥n de todos los problemas de an√°lisis est√°tico
- **Code formatting**: Aplicaci√≥n consistente de est√°ndares de c√≥digo

### üõ°Ô∏è Security

- **API key protection**: Redacci√≥n autom√°tica en logs
- **Input validation**: Validaci√≥n estricta de n√∫meros de tel√©fono y URLs
- **Rate limiting**: Protecci√≥n contra abuso de API

### üìà Performance

- **Connection reuse**: Reutilizaci√≥n de conexiones HTTP
- **Smart caching**: Cach√© con TTL optimizado por tipo de datos
- **Batch processing**: Soporte para env√≠os masivos eficientes
- **Memory optimization**: Uso reducido de memoria en operaciones bulk

---

## [1.0.0] - 2024-09-13

### Added

- Initial release of ConvoChat Laravel SMS Gateway
- SMS sending functionality with device and credit modes
- WhatsApp messaging support (text, media, documents)
- Laravel Service Provider with auto-discovery
- Facade for easy usage (`ConvoChat::sms()`, `ConvoChat::whatsapp()`)
- Configuration file with environment variable support
- Comprehensive error handling and logging
- WhatsApp account linking and management
- Phone number validation for WhatsApp
- Support for Laravel 8.x, 9.x, 10.x, 11.x
- PHP 8.0+ compatibility

### Features

#### SMS
- Send SMS via Android devices or credits
- SIM slot selection (1 or 2)
- Priority settings (high/normal)
- Gateway rate checking
- Device management
- Credit balance checking
- Subscription information

#### WhatsApp

- Text message sending
- Media messages (image, audio, video)
- Document sending (PDF, Excel, Word)
- Account linking with QR code
- Account relinking
- Phone number validation
- Multiple account support

#### Laravel Integration

- Service Provider with singleton bindings
- Publishable configuration
- Facade support
- Environment-based configuration
- Request logging (configurable)
- Comprehensive error handling

## [Unreleased]

### Planned

- Laravel Notifications channel
- Queue job support for bulk messaging
- Template system
- Webhook handling
- Artisan commands
- Analytics and metrics
- Multi-tenant support
